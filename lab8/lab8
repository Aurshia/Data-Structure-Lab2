#include <iostream>
#include <string>
using namespace std;

class Stack {
public:
    char arr[10];
    int top;

    Stack() {
        top = -1;
    }

    bool isFull() {
        return top == 9;   //as arr is holding 9  elements
    }

    bool isEmpty() {
        return top == -1;
    }

    void push(char x) {
        if (isFull()) {
            cout << "Overflow\n";
        } else {
            top++;
            arr[top] = x;
        }
    }

    char pop() {
        if (isEmpty()) {
            cout << "Underflow\n";
            return '\0';
        } else {
            return arr[top--];
        }
    }
};
bool areBracketsBalanced(const string& expression) {
    Stack st;

    for (int i = 0; i < expression.length(); i++) {
        char ch = expression[i];

        if (ch == '(' || ch == '[' || ch == '{') {
            st.push(ch);
        }
        else if (ch == ')' || ch == ']' || ch == '}') {

            if (st.isEmpty()) return false;

            char open = st.pop();

            if ((ch == ')' && open != '(') ||
                (ch == ']' && open != '[') ||
                (ch == '}' && open != '{'))
                return false;
        }
    }

    return st.isEmpty();
}
int main() {
    string exp;
    cout << "Enter expression: ";
    getline(cin, exp);

    if (areBracketsBalanced(exp))
        cout << "Balanced\n";
    else
        cout << "Not Balanced\n";

    return 0;
}
